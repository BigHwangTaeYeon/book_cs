# IP 주소

#### ARP(Address Resolution Protocol)
- 컴퓨터와 컴퓨터 간의 통신은 IP 주소에서 ARP를 통해 MAC 주소를 찾아 그 기반으로 통신
- ARP(Address Resolution Protocol)란 IP와 MAC 주소의 다리 역할을 하는 프로토콜
- ARP를 통해 가상 주소인 IP(논리적) 주소를 MAC(물리적) 주소로 변환
- RARP를 통해 MAC 주소를 IP주소로 변환

장치 A는 IP 주소를 기반으로 ARP Request 브로드캐스트를 보내 MAC 주소를 찾습니다.
해당 주소가 맞는 장치 B가 ARP Reply 유니캐스트를 통해 MAC 주소를 변환하는 과정을 거쳐 맞는 MAC 주소를 찾게 됩니다.
    - 브로드캐스트 : 송신한 호스트의 데이터를 연결된 모든 네트워크의 호스트에 전송
    - 유니캐스트 : 고유 주소로 식별된 하나의 네트워크 목적지에 1:1 데이터를 전송

#### 홉바이홉 통신
- IP 주소를 통해 통신하는 관정
- 각 패킷이 여러 개의 라우터를 건너가는 모습을 비유적으로 표현
    - 라우팅 : IP 주소를 찾아가는 과정

##### 라우팅 테이블(Routin table)
- 송신지에서 수신지까지 도달하기 위해 사용
- 목적지 정보와 가기 위한 방법이 들어있는 리스트

##### 게이트웨이(Gateway)
- 서로 다른 통신망 또는 프로토콜을 사용하는 통신을 가능하게 하는 컴퓨터나 소프트웨어를 칭하는 용어
- 서로 다른 네트워크의 프로토콜을 변환 해주는 역할
- 라우팅 테이블을 통해 볼 수 있으며 netstat -r 명령어를 통해 확인 가능
    IPv4 경로 테이블과 IPv6 경로 테이블이 라우팅 테이블이며 게이트웨이 인터페이스 등이 나옵니다.

#### IP 주소 체계
IP 주소는 IPv4(32비트를 8비트 단위, 120.0.0.1)와 IPv6(64비트를 16비트 단위, 2001:ab8::qq00:74:3927)로 나뉩니다.

##### 클래스 기반 할당 방식(Classful Network Addressing)
앞에 있는 부분 네트워크 주소, 그 뒤에 호스트 주소
            0.0.0.0
00000000.00000000.00000000.00000000
구분비트.00000000.00000000.00000000 - 클래스 간 IP가 나뉜다, 
범위 : 00000000.00000000.00000000.00000000 ~ 01111111.11111111.11111111.11111111
    십진수 0.0.0.0 ~ 127.255.255.255
클래스 A = 21.0.0.0 네트워크 부여
첫번째 주소인 21.0.0.0 네트워크 구별 주소으로 사용 불가
마지막 주소인 21.255.255.255 브로드캐스트용으로 사용 불가
21.0.0.1 ~ 21.255.255.254 안에서 호스트 주소로 사용

버리는 주소가 많은 단점으로 DHCP, IPv6, NAT가 있다.

##### DHCP(Dynamic Host Configuration Protocol)
- IP(인터넷 프로토콜) 주소와 기타 관련 구성 정보(서브넷 마스크 및 기본 게이트웨이)를 IP 호스트에 자동으로 제공하여 자동으로 IP 주소를 할당하는 클라이언트/서버 프로토콜입니다
- 대부분의 가정용 네트워크에서 사용

##### NAT(Network Address Translation)
- IP 패킷에 적힌 소켓 주소의 포트 숫자와 소스 및 목적지의 IP 주소 등을 재기록(다른 주소로 매핑)하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술이다.
- IPv4로 여러 주소를 처리하기에는 단점이기에 NAT가 공인IP 사설IP로 나누어 처리한다.
- NAT를 가능하게 하는 소프트웨어 : ICSm RRAS, Netfilter 등 

사원(사설IP)
대리(사설IP) > 스위치 > 라우터(NAT장치, 공인IP) > 인터넷
과장(사설IP)

한 회사의 사원 대리 과장은 하나의 IP를 가지고 각각 사설 IP로 다른 IP를 사용하는 것 처럼 인터넷 사용이 가능하다.

##### 공유기와 NAT
인터넷 공유기에 NAT 기능이 탑재되어 공유기를 사용하여 한 공인 IP를 사용하지만 여러 호스트가 인터넷에 접속이 가능하다.

##### NAT 보안
외부에 드러나는 IP 주소를 다르게 유지하기에 보안이 가능해진다.

##### NAT 단점
호스트의 숫자에 따라 인터넷 접속 속도가 느려지는 단점을 가지고 있다.

#### IP 주소를 이용한 위치 정보
네트워크에서 사용하는 IP 주소이기에 위치 추적이 가능하다.