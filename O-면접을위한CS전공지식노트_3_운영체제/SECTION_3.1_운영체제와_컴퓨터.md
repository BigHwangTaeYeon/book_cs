# SECTION_3.1_운영체제와_컴퓨터
운영체제 : 하드웨어 + 소프트웨어 관리
컴퓨터 : CPU + DMA Controller + Memory + timer + Device Controller ...

### 운영체제의 역할과 구조

#### 운영체제의 역할
1) CPU 스케쥴링과 프로세스 관리
    - CPU 소유권을 어떤 프로세스에 할당할지
    - 프로세스의 생성과 삭제
    - 자원 할당 및 반환 관리
2) 메모리 관리
    - 특정 프로세스에 할당할 메모리 양을 관리
3) 디스크 파일 관리
    - 디스크 파일을 어떻게 보관할지
4) I/O 디바이스 관리
    - (I/O 디바이스 : 마우스 키보드 등) 컴퓨터와의 Input Output을 관리

#### 운영체제의 구조
프로그램
GUI         (운영체제) (리눅스는 GUI 대신 CUI(명령어로 처리하는 인터페이스)만 있다.)
    - 사용자 인터페이스의 한 형태, window처럼 사용자가 그래픽으로 컴퓨터와 상호 작용을 한다.
시스템콜    (운영체제)
    - 추상화 계층
    - 커널에 접근하기 위한 인터페이스, 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출할 때 사용.
    - 파일을 호출하면 시스템콜에서 커널 모드로 들어가 읽고 돌아와 로직을 수행. (자원에 접근 차단으로 보안에 용의)
커널        (운영체제)
드라이버    (운영체제)
    - 하드웨어를 제어하기 위한 소프트웨어
하드웨어

프로세스와 쓰레드는 데이터 요청 시, 시스템콜, 커널을 거쳐 OS에 전달

##### modebit (운영체제를 통해 디바이스 작동하게 하여 안전성을 높이는 장치)
시스템콜이 작동할 때 유저모드와 커널모드로 구분하고, 1(유저모드) 또는 0(커널모드)의 값을 갖는 플레그. 
카메라, 키보드등 I/O디바이스를 운영체제를 통해서만(커널모드) 사용할 수 있게 하여 해킹으로 부터 사용자 장비를 보호.
- 시스템콜을 작동시켜 1에서 0으로 바꾸어 로직을 수행하고 0에서 1로 바꾸어 이후 로직을 수행한다.
- 유저 모드 : 유저가 접근 가능한 영역
- 커널 모드 : 컴퓨터 자원에 접근할 수 있는 모드
- 커널      : 컴퓨터 운영 체제의 핵심이 되는 컴퓨터 프로그램으로, 시스템의 모든 것을 완전히 제어(control)한다. 

### 컴퓨터의 요소

CPU - RAM(Memory Controller) - DMA Controller - Timer - Device Controller - local buffer - DB
                                                        Device Controller - local buffer - Keyboard
                                                        Device Controller - local buffer - Printer
                                                        Device Controller - local buffer - Moniter

##### CPU(Central Processing Unit)
인터럽트에서 메모리안에 있는 명령어를 해석하여 실행
OS - 커널 - 메모리 - 프로세스 - CPU가 처리
** CPU 구성 **
- 제어장치(CU, Control Unit) : I/O 통신 제어와 명령어 interpret, 데이터 처리 순서 결정
- 레지스터 : 임시기억장치, CPU는 데이터 저장 기능이 없어 레지스터를 거쳐 데이터를 전달
- 산술논리연산장치(ALU, Arithmetic Logic Unit) : 논리 연산을 담당하는 디지털 회로
1) 제어장치 -> 메모리                   계산할 값 로드
2) 제어장치 -> 레지스터                 레지스터 로드
3) 제어장치 -> 산술논리연산장치         레지스터에 있는 값을 산술논리연산장치에 연산 명령
4) 제어장치 -> 레지스터 -> 메모리       레지스터에서 메모리로 계산한 값 저장
- 인터럽트 : CPU를 잠깐 정지시킴, I/O 디바이스로 인한 산술 연산에서 인터럽트, 프로세스 오류 등으로 발생
    발생 시, 인터럽트 벡터에서 핸들러 함수(커널 내부의 IRQ를 통해 호출, request_irq()를 통해 핸들러 함수 등록 가능) 실행
    우선 순위에 따라 실행되며 하드웨어 인터럽트, 소프트웨어 인터럽트로 나뉜다.
    - 하드웨어 인터럽트 : I/O 디바이스에서 발생
    - 소프트웨어 인터럽트(trap 트랩) : 프로세스 오류로 프로세스가 시스템콜을 호출 시, 발동

### DMA(Direct Memory Access) 컨트롤러
CPU 개입없이 메모리에서 읽거나 메모리에 쓸 수있는 I/O 모듈 권한을 부여.
DMA 모듈 자체는 메인 메모리와 I/O 장치 간의 데이터 교환을 제어한다.
CPU는 전송의 시작과 끝에 만 관여하고 전체 블록이 전송 된 후에 만 중단된다.

### 메모리(Memory)
상태 및 명령어 등 기록하는 장치, RAM(Random Access Memory)을 메모리라 하기도 한다.
CPU는 연산, Memory는 기억을 담당

### 타이머(Timer)
특정 프로그램에 시간 제한을 부여.

### 디바이스 컨트롤러(Device Controller)
I/O 디바이스들의 CPU, 로컬 버퍼는 각 디바이스에서 데이터를 임시저장 하기 위한 작은 메모리